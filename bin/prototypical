#!/usr/bin/env bash
set -o errexit
set -o nounset
# set -o xtrace
set -o pipefail

eval "$(parse-options help:h -- "$@")"

if [[ $# -ne 2 ]]
then
	help=yes
fi

if [[ $help ]]
then
	cat '/usr/share/prototypical/help/prototypical'
else
	recipe=$1
	path=$(readlink -f "$2")

	bin_dir=$(readlink -f "$(dirname "${BASH_SOURCE[0]}")")
	install=${bin_dir}/../lib/${recipe}/install

	if [[ -f $install ]]
	then
		"$install" "$path"
	else
		echo 'Please specify a valid recipe.' >&2
		exit 1
	fi
fi
